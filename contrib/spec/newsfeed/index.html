



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Newsfeed - Materials Project Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../#newsfeed" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Materials Project Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Materials Project Documentation
              </span>
              <span class="md-header-nav__topic">
                Newsfeed
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/materialsproject/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      materialsproject/docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Materials Project Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Materials Project Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/materialsproject/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      materialsproject/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../foundation.md" title="Foundation" class="md-nav__link">
      Foundation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Methodology
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Methodology
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/total-energies.md" title="Total energies" class="md-nav__link">
      Total energies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/electronic-structure.md" title="Electronic structure" class="md-nav__link">
      Electronic structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/pseudopotentials.md" title="Pseudopotentials" class="md-nav__link">
      Pseudopotentials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/gga-plus-u.md" title="GGA+U" class="md-nav__link">
      GGA+U
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/elasticity.md" title="Elasticity" class="md-nav__link">
      Elasticity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/elasticity-prediction.md" title="Elasticity prediction" class="md-nav__link">
      Elasticity prediction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/piezoelectricity.md" title="Piezoelectricity" class="md-nav__link">
      Piezoelectricity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/dielelectricity.md" title="Dielectricity" class="md-nav__link">
      Dielectricity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/equations-of-state.md" title="Equations of State" class="md-nav__link">
      Equations of State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../methodology/phonons/" title="Phonons" class="md-nav__link">
      Phonons
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      User Reference - Website
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Reference - Website
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/materials-explorer/" title="Materials Explorer" class="md-nav__link">
      Materials Explorer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/molecules-explorer.md" title="Molecules Explorer" class="md-nav__link">
      Molecules Explorer
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Contribution
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Contribution
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Newsfeed
      </label>
    
    <a href="./" title="Newsfeed" class="md-nav__link md-nav__link--active">
      Newsfeed
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-entry" title="Data entry" class="md-nav__link">
    Data entry
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-display" title="Data display" class="md-nav__link">
    Data display
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-management" title="Data management" class="md-nav__link">
    Data management
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-entry" title="Data entry" class="md-nav__link">
    Data entry
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-display" title="Data display" class="md-nav__link">
    Data display
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-management" title="Data management" class="md-nav__link">
    Data management
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/materialsproject/docs/edit/master/docs/contrib/spec/newsfeed.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="newsfeed">Newsfeed<a class="headerlink" href="#newsfeed" title="Permanent link">&para;</a></h1>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This page is a <em>design specification</em> for a feature to be implemented and
tested before release. </p>
</div>
<p>The <a href="//materialsproject.org">MP website</a> exposes a lot of data and tools.
Sometimes, people are surprised to learn about data and tools that have been
available on the site for months, especially if they have logged in and used the
site recently. One way to keep returning users informed, seen on many websites,
is a news feed. Such a feed consists of short entries, each with a date and
summary of the news.</p>
<p>Often, there is a subtle and unobtrusive visual cue for
returning users to review recent news before continuing to use the site. In
other cases, the recent news is presented in focus for the user to review and
dismiss. Apart from viewing a feed while visiting its website, the feed may
also be formatted as per e.g. the
<a href="https://validator.w3.org/feed/docs/rss2.html">RSS</a> or
<a href="https://validator.w3.org/feed/docs/atom.html">Atom</a> specifications to allow
users to aggregate such news feeds from many websites of interest.</p>
<h2 id="data-entry">Data entry<a class="headerlink" href="#data-entry" title="Permanent link">&para;</a></h2>
<p>To enter news feed items, one creates a Markdown file in the <code>newsfeed/data</code>
directory with a name of the format <code>YYYY-MM-DD-entry-title.md</code>, where
<code>YYYY-MM-DD</code> is a <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>-formatted
date. The file itself will look something like</p>
<div class="codehilite"><pre><span></span>---
title: My feed item title
---

This is a great piece of news.
More info [here](https://materialsproject.org/newstuff).
</pre></div>


<p>This format is based on that used by the <a href="https://jekyllrb.com/">Jekyll</a> static
site framework -- a simple organization of news items into separate files. The
first section of the file (delimited by <code>---</code> lines) is meta-data, aka "front
matter", and will be pre-processed for relevant key-value pairs. The remainder
of the file will be converted to HTML. This may be implemented in one pass, for
example using the Python <code>markdown</code> package with it's built-in <code>"meta-data"</code>
extension.</p>
<p>The <code>title</code> is the only required piece of metadata. If the feed entry requires a
significant change, then an <code>updated</code> metadata field and value (in <code>YYYY-MM-DD</code>
format) should be added -- do not change the filename. If a change to the entry
is insignificant, like fixing a typo, then you don't need to create or update an
<code>updated</code> field.</p>
<h2 id="data-display">Data display<a class="headerlink" href="#data-display" title="Permanent link">&para;</a></h2>
<p>The news feed is displayed in two places: on the static (not-signed-in) home
page, and on the signed-in default app view. Both views are in centered,
responsive two-column layouts near the top of their respective pages. For a
signed-in user, there is up to three months of unseen news. For the static home
page, the news fills the two columns -- this depends on the summary-lengths of
the news items, but does not exceed ten items (five per column). Finally, the
signed-in user view is dismissable with a click.</p>
<p>Each feed item on display shows a date, a title, and a summary. The date is
gathered from the item's filename or from its <code>updated</code> metdata field if
given. The summary is the rendered HTML of the item file's Markdown body. Feed
items are presented in reverse chronological order.</p>
<h2 id="data-management">Data management<a class="headerlink" href="#data-management" title="Permanent link">&para;</a></h2>
<p>The last time a user has seen the newsfeed is stored in the <code>app_db</code>'s
<code>newsfeed_views</code> collection, one document per user. The query</p>
<div class="codehilite"><pre><span></span><span class="n">return_document</span> <span class="o">=</span> <span class="n">app_db</span><span class="o">.</span><span class="n">newsfeed_views</span><span class="o">.</span><span class="n">find_one_and_update</span><span class="p">(</span>
    <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;$set&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;last_seen&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()},</span>
    <span class="n">upsert</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<p>will update a user's document (inserting a document if one doesn't exist) with
the current time as the last-seen time, and return the old user document (or
<code>None</code> if no document existed). The application can then determine which
feed items to render to the user based on the last <code>"last_seen"</code> value. This
example uses the Django <code>request</code> object to get a user's immutable <code>username</code>.
The expression <code>request.user.is_authenticated</code> may be evaluated first in this
case to determine which view is to be rendered.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../../user-guide/materials-explorer/" title="Materials Explorer" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Materials Explorer
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>